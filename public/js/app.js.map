{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["var app = {\n\t\n\tinit: function() {\n\t\t$.ajaxSetup({\n\t\t\tcache: false,\n\t\t\theaders: {'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')}\n\t\t});\n\t\tthis.delete();\n\t},\n\t\n\treadURL: function (input) {\n\t\tif (input.files && input.files[0]) {\n\t\t\tvar reader = new FileReader();\n\t\t\t\n\t\t\treader.onload = function (e) {\n\t\t\t\t$('#wizardPicturePreview').attr('src', e.target.result).fadeIn('slow');\n\t\t\t}\n\t\t\treader.readAsDataURL(input.files[0]);\n\t\t}\n\t},\n\t\n\t/**\n\t * Soumission d'un formulaire en AJAX\n\t * @param form\n\t * @param submit\n\t */\n\tsubmitForm: function(form, submit) {\n\t\t$('body').on('click', submit, function(e) {\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tvar f = $(form);\n\t\t\tvar formData = new FormData(f[0]);\n\t\t\t\n\t\t\tif( $('.' + f.attr('id') + '-errors').length > 0 ) {\n\t\t\t\t$('.' + f.attr('id') + '-errors').fadeOut().remove();\n\t\t\t\t$('#' + f.attr('id') + ' .form-group').removeClass('has-error');\n\t\t\t\t$('#' + f.attr('id') + ' .return-error').remove();\n\t\t\t}\n\t\t\t\n\t\t\t$.ajax({\n\t\t\t\turl: f.attr('action'),\n\t\t\t\tmethod: f.attr('method'),\n\t\t\t\tdata: formData,\n\t\t\t\tdataType: 'JSON',\n\t\t\t\tcache: false,\n\t\t\t\tcontentType: false,\n\t\t\t\tprocessData: false,\n\t\t\t\tsuccess: function(response) {\n\t\t\t\t\t\n\t\t\t\t\tconsole.log(response);\n\t\t\t\t\t\n\t\t\t\t\tif( typeof response.alert != 'undefined' ) {\n\t\t\t\t\t\ttoastr[response.type](response.message);\n\t\t\t\t\t} else if( typeof response.content != 'undefined' ) {\n\t\t\t\t\t\t$(response.element)[response.method](response.content);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif( typeof response.clean != 'undefined' && typeof response.to_clean != 'undefined' && response.clean ) {\n\t\t\t\t\t\t$.each(response.to_clean, function(key, value) {\n\t\t\t\t\t\t\tif( $('#' + value).length > 0 ) {\n\t\t\t\t\t\t\t\t$('#' + value).val('');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif( typeof response.inputs != 'undefined' ) {\n\t\t\t\t\t\t$.each(response.inputs, function(key, value) {\n\t\t\t\t\t\t\tif( $('#' + key).length > 0 ) {\n\t\t\t\t\t\t\t\t$('#' + key).val(value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror :function(response) {\n\t\t\t\t\tvar $errors = $.parseJSON(response.responseText);\n\t\t\t\t\t\n\t\t\t\t\tvar $errorsReturn = '';\n\t\t\t\t\t\n\t\t\t\t\t$.each( $errors, function( key, value ) {\n\t\t\t\t\t\t$errorsReturn += '<li>' + value[0] + '</li>';\n\t\t\t\t\t\t$('#' + key).closest('.form-group').addClass('has-error');\n\t\t\t\t\t\t$('#' + key).after('<span class=\"help-block return-error\">' + value[0] + '</span>');\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tf.prepend('<div class=\"alert alert-danger ' + f.attr('id') + '-errors\"><ul>' + $errorsReturn + '</ul></di>');\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\t},\n\t\n\t/**\n\t * Récupération de données en AJAX\n\t */\n\tloadDataOnClick: function() {\n\t\t$('body').on('click', '[data-action=load]', function(e) {\n\t\t\te.preventDefault();\n\t\t\t$.get($(this).attr('href'), function(response) {\n\t\t\t\tif( typeof response.alert != 'undefined' ) {\n\t\t\t\t\ttoastr[response.type](response.message);\n\t\t\t\t} else {\n\t\t\t\t\t$(response.element)[response.method](response.content);\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t},\n\t\n\tdelete: function() {\n\t\t$('body').on('click', '[data-action=\"delete\"]', function(e) {\n\t\t\te.preventDefault();\n\t\t\tvar data = $(this);\n\t\t\tvar dataId = $(this).attr('data-id');\n\t\t\t\n\t\t\tswal({\n\t\t\t\ttitle: \"Êtes vous sûr ?\",\n\t\t\t\ttext: data.attr('data-message'),\n\t\t\t\ttype: \"warning\",\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tconfirmButtonText: \"Oui\",\n\t\t\t\tcancelButtonText: \"Non\",\n\t\t\t\tcloseOnConfirm: true,\n\t\t\t\tcloseOnCancel: true\n\t\t\t\t},\n\t\t\t\tfunction(isConfirm){\n\t\t\t\t\tif( isConfirm ) {\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\turl: data.attr('href'),\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tdata: {_method: 'delete', _token: data.attr('data-token')},\n\t\t\t\t\t\t\tsuccess: function(response) {\n\t\t\t\t\t\t\t\tconsole.log(response.success);\n\t\t\t\t\t\t\t\tif( typeof response.success != 'undefined' && response.success ) {\n\t\t\t\t\t\t\t\t\t$('#' + dataId).fadeOut().remove();\n\t\t\t\t\t\t\t\t\tif( typeof response.message != 'undefined' ) {\n\t\t\t\t\t\t\t\t\t\ttoastr['success'](response.message);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ttoastr['error']('Une erreur est survenue durant la suppression de l\\'élément');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t})\n\t}\n}\n\napp.init();"]}